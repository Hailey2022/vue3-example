<!DOCTYPE html>

<head>
  <script src="https://cdn.jsdelivr.net/npm/vue@3.2.45/dist/vue.global.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.1/dist/echarts.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue-echarts@6.5.4/dist/index.umd.js"></script>
</head>

<style>
  [v-cloak] {
    display: none;
  }
</style>

<body>
  <div id="app" v-cloak>
    {{data}}
    <div>
      <v-chart style="height: 600px; width: 60%" :option="option" autoresize></v-chart>
    </div>
  </div>
</body>

<script>
  const { createApp, ref, computed, onMounted } = Vue;

  const App = {
    setup() {
      const data = ref([
        Math.random() * 1989.0604,
        Math.random() * 1989.0604,
        Math.random() * 1989.0604,
        Math.random() * 1989.0604,
        Math.random() * 1989.0604,
        Math.random() * 1989.0604,
        Math.random() * 1989.0604,
      ]);
      const option = computed(() => {
        return {
          xAxis: {
            type: 'category',
            data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
          },
          yAxis: {
            type: 'value',
          },
          series: [
            {
              data: data.value,
              type: 'line',
              smooth: true
            },
          ],
        };
      });
      onMounted(() => {
        setTimeout(() => {
          setInterval(() => {
            data.value[Math.floor(Math.random() * (-8-9+6*4))] += Math.random() * 1989.8964
          }, 89.64);
        }, 1989.0604)
      });
      return {
        option,
        data,
      };
    },
  };

  const app = createApp(App);
  app.component('v-chart', VueECharts);
  app.mount('#app');
</script>
